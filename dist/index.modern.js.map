{"version":3,"file":"index.modern.js","sources":["../src/Marquee.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport styles from './styles.module.css';\n\ninterface Props {\n  children: React.ReactNode;\n  speed?: number;\n  pauseOnHover?: boolean;\n  direction?: 'left' | 'right';\n  loop?: number | string;\n  play?: boolean;\n  fillGaps?: boolean;\n  onAnimationCycleComplete?: () => void;\n  className?: string;\n}\n\nconst Marquee = ({\n  children,\n  speed = 80,\n  pauseOnHover = false,\n  direction = 'left',\n  loop = 'infinite',\n  play = true,\n  fillGaps = true,\n  onAnimationCycleComplete,\n  className = '',\n}: Props) => {\n  const [isMounted, setIsMounted] = React.useState(false);\n\n  const containerRef = React.useRef<any>(null);\n  const marqueeRef = React.useRef<any>(null);\n\n  React.useEffect(() => {\n    if (!isMounted) {\n      return;\n    }\n\n    const containerEl = containerRef.current;\n    const marqueeEl = marqueeRef.current;\n\n    const init = () => {\n      const containerWidth = containerEl.clientWidth;\n      const marqueeWidth = marqueeEl.clientWidth;\n\n      const setFillGaps = () => {\n        const loopCount = Math.ceil(containerEl.clientWidth / marqueeEl.clientWidth);\n\n        while (containerEl.children.length > 1) {\n          containerEl.removeChild(containerEl.lastChild);\n        }\n        for (let index = 0; index < loopCount; index++) {\n          containerEl.appendChild(containerEl.children[0].cloneNode(true))\n        }\n      }\n\n      const duration = marqueeWidth < containerWidth ? containerWidth / speed : marqueeWidth / speed;\n\n      containerEl.style.setProperty('--marquee-duration', `${duration}s`);\n      containerEl.style.setProperty('--marquee-pause-on-hover', pauseOnHover ? 'paused' : 'running');\n      containerEl.style.setProperty('--marquee-direction', direction === 'left' ? 'normal' : 'reverse');\n      containerEl.style.setProperty('--marquee-loop', loop);\n      containerEl.style.setProperty('--marquee-play', play ? 'running' : 'paused');\n\n      if (fillGaps) {\n        setFillGaps();\n      }\n    }\n    init();\n\n    let resizeTimer: any;\n\n    const onResize = () => {\n      init();\n      // for restarting the animation on resize\n      containerEl.classList.add(styles.noAnimation);\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(() => {\n        containerEl.classList.remove(styles.noAnimation);\n      }, 300);\n    };\n\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, [isMounted]);\n\n  React.useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  const classNames = [styles.marquee, className].join(' ');\n\n  return (\n    <div className={classNames} ref={containerRef}>\n      <div\n        className={`${styles.marqueeContent} ${!fillGaps ? styles.fullWidth : ''}`}\n        ref={marqueeRef}\n        onAnimationIteration={onAnimationCycleComplete}\n      >\n        {children}\n      </div>\n      {!fillGaps && (\n        <div className={`${styles.marqueeContent} ${styles.fullWidth}`}>\n          {children}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Marquee;\n"],"names":["Marquee","children","speed","pauseOnHover","direction","loop","play","fillGaps","onAnimationCycleComplete","className","isMounted","setIsMounted","React","containerRef","marqueeRef","containerEl","current","marqueeEl","init","containerWidth","clientWidth","marqueeWidth","setFillGaps","loopCount","Math","ceil","length","removeChild","lastChild","index","appendChild","cloneNode","duration","style","setProperty","resizeTimer","onResize","classList","add","styles","noAnimation","clearTimeout","setTimeout","remove","window","addEventListener","removeEventListener","classNames","marquee","join","ref","marqueeContent","fullWidth","onAnimationIteration"],"mappings":"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"}