{"version":3,"file":"index.js","sources":["../src/Marquee.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport styles from './styles.module.css';\n\ninterface Props {\n  children: React.ReactNode;\n  speed?: number;\n  pauseOnHover?: boolean;\n  direction?: 'left' | 'right';\n  loop?: number | string;\n  play?: boolean;\n  fillGaps?: boolean;\n  onAnimationCycleComplete?: () => void;\n  className?: string;\n}\n\nconst Marquee = ({\n  children,\n  speed = 80,\n  pauseOnHover = false,\n  direction = 'left',\n  loop = 'infinite',\n  play = true,\n  fillGaps = true,\n  onAnimationCycleComplete,\n  className = '',\n}: Props) => {\n  const [isMounted, setIsMounted] = React.useState(false);\n\n  const containerRef = React.useRef<any>(null);\n  const marqueeRef = React.useRef<any>(null);\n\n  React.useEffect(() => {\n    if (!isMounted) {\n      return;\n    }\n\n    const containerEl = containerRef.current;\n    const marqueeEl = marqueeRef.current;\n\n    const init = () => {\n      const containerWidth = containerEl.clientWidth;\n      const marqueeWidth = marqueeEl.clientWidth;\n\n      const setFillGaps = () => {\n        const loopCount = Math.ceil(containerEl.clientWidth / marqueeEl.clientWidth);\n\n        while (containerEl.children.length > 1) {\n          containerEl.removeChild(containerEl.lastChild);\n        }\n        for (let index = 0; index < loopCount; index++) {\n          containerEl.appendChild(containerEl.children[0].cloneNode(true))\n        }\n      }\n\n      const duration = marqueeWidth < containerWidth ? containerWidth / speed : marqueeWidth / speed;\n\n      containerEl.style.setProperty('--marquee-duration', `${duration}s`);\n      containerEl.style.setProperty('--marquee-pause-on-hover', pauseOnHover ? 'paused' : 'running');\n      containerEl.style.setProperty('--marquee-direction', direction === 'left' ? 'normal' : 'reverse');\n      containerEl.style.setProperty('--marquee-loop', loop);\n      containerEl.style.setProperty('--marquee-play', play ? 'running' : 'paused');\n\n      if (fillGaps) {\n        setFillGaps();\n      }\n    }\n    init();\n\n    let resizeTimer: any;\n\n    const onResize = () => {\n      init();\n      // for restarting the animation on resize\n      containerEl.classList.add(styles.noAnimation);\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(() => {\n        containerEl.classList.remove(styles.noAnimation);\n      }, 300);\n    };\n\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, [isMounted]);\n\n  React.useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  const classNames = [styles.marquee, className].join(' ');\n\n  return (\n    <div className={classNames} ref={containerRef}>\n      <div\n        className={`${styles.marqueeContent} ${!fillGaps ? styles.fullWidth : ''}`}\n        ref={marqueeRef}\n        onAnimationIteration={onAnimationCycleComplete}\n      >\n        {children}\n      </div>\n      {!fillGaps && (\n        <div className={`${styles.marqueeContent} ${styles.fullWidth}`}>\n          {children}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Marquee;\n"],"names":["Marquee","children","speed","pauseOnHover","direction","loop","play","fillGaps","onAnimationCycleComplete","className","React","isMounted","setIsMounted","containerRef","marqueeRef","containerEl","current","marqueeEl","init","containerWidth","clientWidth","marqueeWidth","setFillGaps","loopCount","Math","ceil","length","removeChild","lastChild","index","appendChild","cloneNode","duration","style","setProperty","resizeTimer","onResize","classList","add","styles","noAnimation","clearTimeout","setTimeout","remove","window","addEventListener","removeEventListener","classNames","marquee","join","ref","marqueeContent","fullWidth","onAnimationIteration"],"mappings":"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"}